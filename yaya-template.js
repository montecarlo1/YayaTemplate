//YayaTemplate//author:yaya,jihu//uloveit.com.cn/template//how to use?  YayaTemplate("xxx").render({});var YayaTemplate = YayaTemplate || function(str){	var _s = true,_sl,_sn='',_sd,_analyze,_temp,_array,len,identifierstr = '',value,valuemap={};	if (this.document&&this.navigator)	{		_s = /msie (\d+\.\d+)/i.test(navigator.userAgent)?(document.documentMode || + RegExp['\x241'])>=8:true;	}	if (_s)	{		_sl = "+=";		_sd = "''";	}	else{		_sl = ".push";		_sd = "[]";		_sn = ".join('')";	}	//核心分析方法    _analyze=function(text){        return text.replace(/{\$(\s|\S)*?\$}/g,function(s){ 		   return s.replace(/("|\\)/g,"\\$1")				   .replace("{$",'_YayaTemplateString'+_sl+'("')				   .replace("$}",'");')                   .replace(/{\%([\s\S]*?)\%}/g,'");_YayaTemplateString'+_sl+'($1);_YayaTemplateString'+_sl+'("').replace(/\r\n|\n/g,"\\r\\n");        });    };    //中间代码	_temp = _analyze(str);	function isKeyword(id) {        var keyword;        switch (id.length) {        case 2:            keyword = (id === 'if') || (id === 'in') || (id === 'do');            break;        case 3:            keyword = (id === 'var') || (id === 'for') || (id === 'new') || (id === 'try') || (id === 'let');            break;        case 4:            keyword = (id === 'this') || (id === 'else') || (id === 'case') || (id === 'void') || (id === 'with') ||(id === 'enum');            break;        case 5:            keyword = (id === 'while') || (id === 'break') || (id === 'catch') || (id === 'throw') || (id === 'const') || (id === 'yield') || (id === 'class') || (id === 'export') || (id === 'import') || (id === 'super');            break;        case 6:            keyword = (id === 'return') || (id === 'typeof') || (id === 'delete') || (id === 'switch') || (id === 'public') || (id === 'static');            break;        case 7:            keyword = (id === 'default') || (id === 'finally') || (id === 'package') || (id === 'private') || (id === 'extends');            break;        case 8:            keyword = (id === 'function') || (id === 'continue') || (id === 'debugger');            break;		case 9:			keyword = (id === 'interface') || (id === 'protected');			break;        case 10:            keyword = (id === 'instanceof') || (id === 'implements');            break;        }        return keyword;    }	_array = _temp.replace(/"([^\\"]|\\[\s\S])*"|'([^\\']|\\[\s\S])*'/g,"").replace(/\.[\_\$\w]+/g,"").match(/[\_\$a-zA-Z]+[0-9]*/g);	len = _array.length;	while(len--)	{		value = _array[len];		if (!valuemap[value]&&!isKeyword(value))		{			identifierstr+=value+'=_YayaTemplateObject["'+value+'"],';			valuemap[value] = true;		}	}	return {		render:new Function("_YayaTemplateObject","var "+identifierstr+"_YayaTemplateString="+_sd+";"+_temp+" return _YayaTemplateString"+_sn+";")	};};